##### 一、URL是什么？
URL(uniform resource locator)统一资源定位符。它是对从可以从互联网上得到的资源的位置和访问方法的一种简洁的表示。互联网上的每个文件都有一个唯一的URL，它包含的信息指出文件的位置以及浏览器该怎么处理它。
##### 二、URL的结构
基本URL包含模式（或称协议）、服务器名称（或IP地址）、路径和文件名。
- 第一部分：模式/协议：它告诉浏览器如何处理将要打开的文件。我们最常用的就是http，除此之外还有常用的在本地电脑打开文件的file协议，等等。
- 第二部分：文件所在的服务器的名称或IP地址，后面是到达这个文件的路径和文件本身的名称。服务器的名称或IP地址后面有时还跟一个冒号和一个端口号，它也可以包含接触服务器必须的用户名称和密码。路径部分包含等级结构的路径定义，一般来说不同部分之间以斜线（/）分隔。询问部分一般用来传送对服务器上的数据库进行动态询问时所需要的参数。
有些时候地址不包含端口号，就会根据协议来确定一个默认的端口号，如常见的8080.
![](http://upload-images.jianshu.io/upload_images/2070541-51c2c41af6f6dedf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

##### 接下来我们具体来看看，输入url后是怎样展示出页面的？
一、查找域名对应IP地址
浏览器缓存-》系统缓存-》路由器缓存...
1、浏览器搜索自己的DNS缓存（一张域名与IP地址的对应表）
2、搜索操作系统中的DNS缓存
浏览器和操作系统在获取网站域名的实际IP地址后会对其IP进行缓存，在短时间内重复访问同一域名时，会直接在DNS缓存中读取域名对应的IP地址，以减少网络请求的损耗（先在浏览器DNS缓存中查找，如果没有找到，则会在操作系统DNS缓存中查找）。
浏览器和操作系统都有一个固定的DNS缓存时间，其中Chrome的过期时间是1分钟，在这个期限内不会重新请求DNS。
3、查询hosts文件
如果在本地DNS缓存中没有找到域名对应的IP地址，则会查询hosts文件，看其中是否已经有与当前域名对应的 IP 地址，如果有就会直接采用，如果没有，那么就得由DNS服务器进行域名解析完成域名与IP的转换工作。
4、操作系统将域名发送至LDNS（本地区域名服务器），LDNS查询自己的DNS缓存，查询成功返回结果，失败则发起一个迭代DNS解析请求
LDNS向Root Name Server（根域名服务器，如com/net/org等解析的顶级域名服务器的地址）发起请求，此处，Root Name Server返回com域的顶级域名服务器的地址。
5、LDNS将得到的IP地址返回给操作系统，同时自己也将IP地址缓存起来
6、操作系统将IP地址返回给浏览器，同时自己将IP地址缓存起来
二、建立连接（TCP传输控制协议的三次握手）
1、主机向服务器发送一个建立连接的请求
2、服务器接到请求后发送同意连接的信号
3、主机接到同意连接的信号后，再次向服务器发送了确认信号
	>注意：主机两次向服务器发送确认，第二次是为了防止已失效的连接请求报文段传至服务器导致错误。
	>那为什么会出现已失效的链接呢？因为客户端发送连接请求到服务器端是需要时间的，想想这种情况客户端发出的第一个连接请求报文段在某个网络结点长时间的滞留，导致延误到连接释放以后某个时间才到达服务器端。这本来是一个早已失效的报文段，但服务器收到此失效的连接请求报文段后，就误以为是客户端再次发出的一个新的连接请求。于是就向客户端发出确认报文段，同意建立连接。若是不采用三次握手，那么只要server发出确认，新的连接就建立了。由于现在client并没有发出建立连接的请求，因此不会理睬server的确认，也不会向server发送数据。但server却以为新的运输连接已经建立，并一直等待client发来数据。这样，server的很多资源就白白浪费掉了。采用“三次握手”的办法可以防止上述现象发生。例如刚才那种情况，client不会向server的确认发出确认。server由于收不到确认，就知道client并没有要求建立连接。
三、构建网页
1、浏览器根据URL内容生成HTTP请求，请求中包含请求文件的位置，请求文件的方式等
2、服务器接到请求后，会根据HTTP请求中的内容来决定如何获取相应的HTML文件
3、服务器将得到的HTML文件发送给浏览器
4、在浏览器还没有完全接收HTML文件时便开始渲染、显示网页
5、在解析HTML过程中，根据需要浏览器会继续请求css、图片、视频、js等文件。
	>浏览器渲染展示网页过程
	1、根据HTML构造DOM tree
	2、css代码转换为CSSOM（css object Model）
	3、结合DOM和CSSOM，生成render tree
	4、生成布局layout，即将所有渲染树的所有节点进行平面合成
	5、将布局paint在屏幕上
四、断开连接（TCP的四次挥手）
1、主机向服务器发送一个断开连接的请求
2、服务器收到请求后发送确认收到请求的信号（此时服务器可能还有数据要发送至主机）
3、服务器向主机发送断开通知（此时服务器已经确认发送给客户端的数据已经完毕）
4、主机接到断开通知后断开连接并反馈一个确认信号，服务器收到确认信号后断开连接。
##### 四、域名解析
1、DNS
域名系统DNS(Domain Name System)：用来把人们使用的域名转换为IP地址的系统。它是一个联机分布式数据库系统，采用客户服务器方式。
2、DNS解析
域名到IP地址的解析：当浏览器需要把域名解析为IP地址时，会调用解析程序，并成为DNS的一个客户，把带解析的域名放在DNS请求报文中，以UDP用户数据报方式发送给**本地域名服务器**可以是路由器或者是运营商服务器）。本地域名服务器在查找域名后，把对应的IP地址放在回答报文中返回。浏览器在获取相应的IP地址后即可进行下一步的通信。
##### 五、浏览器发送请求给服务器
1、当浏览器得到域名对应的IP地址后，则会使用**TCP协议**，和服务器建立连接（**三次握手**）。
2、和服务器建立连接后，浏览器则会使用相关协议(http或https)，向服务器发送请求。
3、HTTP协议请求方法主要有：get、post、put、delete等几种方式。
##### 六、服务器请求并返回结果
服务器上的web server来处理这些请求。以MVC框架为例，当服务器收到来自用户的请求后，首先Controller(控制器)根据用户的请求调用相应的Model(模型)去处理用户请求相关的业务逻辑(包括对数据库的增删改查)，然后将处理结果传递给对应的View(视图)，构造显示页面(HTML文件)。最后服务器使用HTTP响应返回相应的资源(HTML文件)。
![](http://upload-images.jianshu.io/upload_images/2070541-a85d180d64480945.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
##### 七、浏览器处理响应
浏览器收到来自服务器的响应后，会将响应中的HTML字符串一句句读取解析，解析到link标签后重新发送请求下载css文件，解析到script标签后重新发送请求下载js文件，并执行代码，解析到img标签后重新发送请求获取图片资源。